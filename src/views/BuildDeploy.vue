<template>
    <MainLayout>
        <div class="lesson-content">
            <h1 class="section-header">æ§‹å»ºéƒ¨ç½²å¯¦æˆ°</h1>

            <div class="subsection">
                <p class="text-lg mb-6">
                    æœ¬ç« å°‡æ·±å…¥æ¢è¨ Vue 3 + Vite å°ˆæ¡ˆçš„æ§‹å»ºæ‰“åŒ…æµç¨‹ï¼Œç­è§£ç‚ºä»€éº¼éœ€è¦æ‰“åŒ…ã€æ‰“åŒ…å‰å¾Œçš„å·®ç•°ï¼Œ
                    ä»¥åŠå¦‚ä½•å„ªåŒ–æ§‹å»ºé…ç½®å’Œéƒ¨ç½²ç­–ç•¥ã€‚
                </p>

                <!-- ç‚ºä»€éº¼éœ€è¦æ‰“åŒ… -->
                <section class="mb-12">
                    <h2 class="text-2xl font-bold mb-6">ğŸ¯ ç‚ºä»€éº¼éœ€è¦æ‰“åŒ…ï¼Ÿ</h2>

                    <div class="bg-blue-50 dark:bg-blue-900/20 p-6 rounded-lg mb-6">
                        <h3 class="text-lg font-semibold mb-4">é–‹ç™¼ç’°å¢ƒ vs ç”Ÿç”¢ç’°å¢ƒçš„å·®ç•°</h3>
                        <div class="grid md:grid-cols-2 gap-6">
                            <div>
                                <h4 class="font-semibold text-green-600 mb-2">é–‹ç™¼ç’°å¢ƒç‰¹é»</h4>
                                <ul class="space-y-1 text-sm">
                                    <li>â€¢ æºç¢¼ç›´æ¥åŸ·è¡Œï¼Œä¾¿æ–¼èª¿è©¦</li>
                                    <li>â€¢ ç†±é‡è¼‰ (HMR) å³æ™‚é è¦½</li>
                                    <li>â€¢ å®Œæ•´çš„ Source Map</li>
                                    <li>â€¢ æ‰€æœ‰ä¾è³´éƒ½è¢«è¼‰å…¥</li>
                                    <li>â€¢ æª”æ¡ˆå¤§å° 280MB+</li>
                                </ul>
                            </div>
                            <div>
                                <h4 class="font-semibold text-blue-600 mb-2">ç”Ÿç”¢ç’°å¢ƒéœ€æ±‚</h4>
                                <ul class="space-y-1 text-sm">
                                    <li>â€¢ ç¨‹å¼ç¢¼å£“ç¸®ï¼Œè¼‰å…¥é€Ÿåº¦å¿«</li>
                                    <li>â€¢ ç§»é™¤ç„¡ç”¨ç¨‹å¼ç¢¼ (Tree Shaking)</li>
                                    <li>â€¢ éœæ…‹è³‡æºå„ªåŒ–</li>
                                    <li>â€¢ ç¨‹å¼ç¢¼åˆ†å‰²ï¼ŒæŒ‰éœ€è¼‰å…¥</li>
                                    <li>â€¢ æª”æ¡ˆå¤§å°åƒ… 250KB</li>
                                </ul>
                            </div>
                        </div>
                    </div>

                    <div class="comparison-container mb-8">
                        <h3 class="text-lg font-semibold mb-4">ğŸ“Š æ‰“åŒ…å‰å¾Œå°æ¯”</h3>
                        <div class="grid lg:grid-cols-2 gap-6">
                            <div>
                                <h4 class="font-medium mb-3">é–‹ç™¼ç’°å¢ƒæª”æ¡ˆçµæ§‹</h4>
                                <CodeBlock :code="developmentStructure" language="bash" :show-copy="true" />
                            </div>
                            <div>
                                <h4 class="font-medium mb-3">ç”Ÿç”¢ç’°å¢ƒæ‰“åŒ…å¾Œçµæ§‹</h4>
                                <CodeBlock :code="productionStructure" language="bash" :show-copy="true" />
                            </div>
                        </div>
                    </div>
                </section>

                <!-- Vite æ§‹å»ºé…ç½® -->
                <section class="mb-12">
                    <h2 class="text-2xl font-bold mb-6">âš™ï¸ Vite æ§‹å»ºé…ç½®è©³è§£</h2>

                    <div class="mb-8">
                        <h3 class="text-lg font-semibold mb-4">åŸºæœ¬æ§‹å»ºé…ç½®</h3>
                        <p class="mb-4 text-gray-600 dark:text-gray-300">
                            ä»¥ä¸‹æ˜¯ Vite çš„åŸºæœ¬æ§‹å»ºé…ç½®ï¼Œæ¶µè“‹äº†æœ€å¸¸ç”¨çš„æ‰“åŒ…é¸é …ï¼š
                        </p>
                        <CodeBlock :code="basicBuildConfig" language="typescript" filename="vite.config.ts"
                            :show-copy="true" />
                    </div>

                    <div class="mb-8">
                        <h3 class="text-lg font-semibold mb-4">é€²éšæ§‹å»ºé…ç½®</h3>
                        <p class="mb-4 text-gray-600 dark:text-gray-300">
                            é€²éšé…ç½®åŒ…å«ç¨‹å¼ç¢¼åˆ†å‰²ã€è‡ªè¨‚æª”æ¡ˆå‘½åç­‰å„ªåŒ–ç­–ç•¥ï¼š
                        </p>
                        <CodeBlock :code="advancedBuildConfig" language="typescript" filename="vite.config.ts"
                            :show-copy="true" />
                    </div>

                    <div class="mb-8">
                        <h3 class="text-lg font-semibold mb-4">ç’°å¢ƒè®Šæ•¸é…ç½®</h3>
                        <p class="mb-4 text-gray-600 dark:text-gray-300">
                            ä½¿ç”¨ç’°å¢ƒè®Šæ•¸ä¾†å€åˆ†ä¸åŒçš„éƒ¨ç½²ç’°å¢ƒï¼š
                        </p>
                        <CodeBlock :code="envConfig" language="bash" :show-copy="true" />
                    </div>

                    <div class="mb-8">
                        <h3 class="text-lg font-semibold mb-4">æ§‹å»ºè…³æœ¬é…ç½®</h3>
                        <p class="mb-4 text-gray-600 dark:text-gray-300">
                            åœ¨ package.json ä¸­è¨­å®šä¸åŒç’°å¢ƒçš„æ§‹å»ºè…³æœ¬ï¼š
                        </p>
                        <CodeBlock :code="buildScripts" language="json" filename="package.json" :show-copy="true" />
                    </div>
                </section>

                <!-- æ‰“åŒ…éç¨‹æ¼”ç¤º -->
                <section class="mb-12">
                    <h2 class="text-2xl font-bold mb-6">ğŸ”§ æ‰“åŒ…éç¨‹æ¼”ç¤º</h2>

                    <div class="mb-8">
                        <h3 class="text-lg font-semibold mb-4">åŸ·è¡Œæ‰“åŒ…å‘½ä»¤</h3>
                        <p class="mb-4 text-gray-600 dark:text-gray-300">
                            åŸ·è¡Œæ§‹å»ºå‘½ä»¤å¾Œï¼ŒVite æœƒé€²è¡Œä»¥ä¸‹è™•ç†æµç¨‹ï¼š
                        </p>
                        <CodeBlock :code="buildProcess" language="bash" :show-copy="true" />
                    </div>

                    <div class="mb-8">
                        <h3 class="text-lg font-semibold mb-4">å„ªåŒ–æ•ˆæœå°æ¯”</h3>
                        <CodeBlock :code="optimizationComparison" language="yaml" :show-copy="true" />
                    </div>

                    <div class="bg-yellow-50 dark:bg-yellow-900/20 p-6 rounded-lg mb-6">
                        <h3 class="text-lg font-semibold mb-4 flex items-center">
                            <span class="mr-2">ğŸ’¡</span>
                            æ§‹å»ºå„ªåŒ–é—œéµè¦é»
                        </h3>
                        <ul class="space-y-2">
                            <li>â€¢ <strong>ç¨‹å¼ç¢¼åˆ†å‰²</strong>ï¼šå°‡ç¬¬ä¸‰æ–¹åº«èˆ‡æ‡‰ç”¨ç¨‹å¼ç¢¼åˆ†é›¢ï¼Œæå‡å¿«å–æ•ˆç‡</li>
                            <li>â€¢ <strong>Tree Shaking</strong>ï¼šè‡ªå‹•ç§»é™¤æœªä½¿ç”¨çš„ç¨‹å¼ç¢¼ï¼Œæ¸›å°‘æœ€çµ‚åŒ…å¤§å°</li>
                            <li>â€¢ <strong>éœæ…‹è³‡æºå„ªåŒ–</strong>ï¼šåœ–ç‰‡å£“ç¸®ã€æ ¼å¼è½‰æ› (WebP)ã€å¿«å–ç­–ç•¥</li>
                            <li>â€¢ <strong>CSS è™•ç†</strong>ï¼šæ¨£å¼æå–ã€å£“ç¸®ã€é—œéµè·¯å¾‘å„ªåŒ–</li>
                            <li>â€¢ <strong>æª”æ¡ˆåç¨±é›œæ¹Š</strong>ï¼šç¢ºä¿ç€è¦½å™¨å¿«å–æ›´æ–°</li>
                        </ul>
                    </div>
                </section>

                <!-- å¯¦éš›æ¼”ç·´ -->
                <section class="mb-12">
                    <h2 class="text-2xl font-bold mb-6">ğŸš€ å¯¦éš›æ¼”ç·´æ­¥é©Ÿ</h2>

                    <div class="steps-container">
                        <div class="step">
                            <div class="step-number">1</div>
                            <div class="step-content">
                                <h3 class="font-semibold text-gray-900 dark:text-white">æª¢æŸ¥å°ˆæ¡ˆé…ç½®</h3>
                                <p class="text-gray-700 dark:text-gray-300">ç¢ºèª vite.config.ts ä¸­çš„æ§‹å»ºè¨­å®šæ˜¯å¦ç¬¦åˆéœ€æ±‚</p>
                                <code
                                    class="bg-gray-100 dark:bg-gray-800 px-2 py-1 rounded text-sm text-gray-800 dark:text-gray-200">
                  npm run build
                </code>
                            </div>
                        </div>

                        <div class="step">
                            <div class="step-number">2</div>
                            <div class="step-content">
                                <h3 class="font-semibold text-gray-900 dark:text-white">åŸ·è¡Œæœ¬åœ°é è¦½</h3>
                                <p class="text-gray-700 dark:text-gray-300">æ‰“åŒ…å®Œæˆå¾Œï¼Œä½¿ç”¨å…§å»ºé è¦½ä¼ºæœå™¨æ¸¬è©¦</p>
                                <code
                                    class="bg-gray-100 dark:bg-gray-800 px-2 py-1 rounded text-sm text-gray-800 dark:text-gray-200">
                  npm run preview
                </code>
                            </div>
                        </div>

                        <div class="step">
                            <div class="step-number">3</div>
                            <div class="step-content">
                                <h3 class="font-semibold text-gray-900 dark:text-white">åˆ†ææ‰“åŒ…çµæœ</h3>
                                <p class="text-gray-700 dark:text-gray-300">æª¢æŸ¥ dist/ ç›®éŒ„çµæ§‹å’Œæª”æ¡ˆå¤§å°</p>
                                <code
                                    class="bg-gray-100 dark:bg-gray-800 px-2 py-1 rounded text-sm text-gray-800 dark:text-gray-200">
                  ls -la dist/assets/
                </code>
                            </div>
                        </div>

                        <div class="step">
                            <div class="step-number">4</div>
                            <div class="step-content">
                                <h3 class="font-semibold text-gray-900 dark:text-white">æ•ˆèƒ½é©—è­‰</h3>
                                <p class="text-gray-700 dark:text-gray-300">ä½¿ç”¨ç€è¦½å™¨é–‹ç™¼è€…å·¥å…·æ¸¬è©¦è¼‰å…¥é€Ÿåº¦</p>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- éƒ¨ç½²ç­–ç•¥ -->
                <section class="mb-12">
                    <h2 class="text-2xl font-bold mb-6">ğŸŒ éƒ¨ç½²ç­–ç•¥æ¦‚è¦½</h2>

                    <div class="grid md:grid-cols-2 gap-6 mb-8">
                        <div class="deployment-card">
                            <h3 class="font-semibold mb-3 text-gray-900 dark:text-white">ğŸ–¥ï¸ å‚³çµ±ä¼ºæœå™¨éƒ¨ç½²</h3>
                            <ul class="text-sm space-y-1 mb-4 text-gray-700 dark:text-gray-300">
                                <li>â€¢ Nginx/Apache éœæ…‹æª”æ¡ˆè¨—ç®¡</li>
                                <li>â€¢ SPA è·¯ç”±è¨­å®š</li>
                                <li>â€¢ Gzip å£“ç¸®é…ç½®</li>
                                <li>â€¢ å¿«å–ç­–ç•¥è¨­å®š</li>
                            </ul>
                            <div class="text-xs text-gray-500 dark:text-gray-400">é©åˆï¼šä¼æ¥­å…§éƒ¨ç³»çµ±</div>
                        </div>

                        <div class="deployment-card">
                            <h3 class="font-semibold mb-3 text-gray-900 dark:text-white">â˜ï¸ é›²ç«¯å¹³å°éƒ¨ç½²</h3>
                            <ul class="text-sm space-y-1 mb-4 text-gray-700 dark:text-gray-300">
                                <li>â€¢ Vercel, Netlify ä¸€éµéƒ¨ç½²</li>
                                <li>â€¢ GitHub Pages å…è²»è¨—ç®¡</li>
                                <li>â€¢ AWS S3 + CloudFront</li>
                                <li>â€¢ è‡ªå‹•åŒ–éƒ¨ç½²æµç¨‹</li>
                            </ul>
                            <div class="text-xs text-gray-500 dark:text-gray-400">é©åˆï¼šå€‹äººå°ˆæ¡ˆã€åŸå‹</div>
                        </div>
                    </div>

                    <div class="mb-8">
                        <h3 class="text-lg font-semibold mb-4">Nginx é…ç½®ç¯„ä¾‹</h3>
                        <p class="mb-4 text-gray-600 dark:text-gray-300">
                            é©ç”¨æ–¼å‚³çµ±ä¼ºæœå™¨éƒ¨ç½²çš„ Nginx é…ç½®ï¼ŒåŒ…å« SPA è·¯ç”±æ”¯æ´å’Œéœæ…‹è³‡æºå„ªåŒ–ï¼š
                        </p>
                        <CodeBlock :code="nginxConfig" language="nginx" filename="nginx.conf" :show-copy="true" />
                    </div>

                    <div class="mb-8">
                        <h3 class="text-lg font-semibold mb-4">Docker éƒ¨ç½²é…ç½®</h3>
                        <p class="mb-4 text-gray-600 dark:text-gray-300">
                            ä½¿ç”¨å¤šéšæ®µæ§‹å»ºçš„ Docker éƒ¨ç½²æ–¹æ¡ˆï¼Œé©åˆå®¹å™¨åŒ–éƒ¨ç½²ç’°å¢ƒï¼š
                        </p>
                        <CodeBlock :code="dockerConfig" language="dockerfile" filename="Dockerfile" :show-copy="true" />
                    </div>
                </section>

                <!-- å¸¸è¦‹å•é¡Œ -->
                <section class="mb-12">
                    <h2 class="text-2xl font-bold mb-6">â“ å¸¸è¦‹å•é¡Œèˆ‡è§£æ±ºæ–¹æ¡ˆ</h2>

                    <div class="faq-container space-y-4">
                        <div class="faq-item">
                            <h3 class="font-semibold text-red-600">å•é¡Œï¼šæ‰“åŒ…å¾Œè·¯ç”± 404 éŒ¯èª¤</h3>
                            <p class="text-gray-600 dark:text-gray-300">
                                <strong>åŸå› ï¼š</strong>SPA è·¯ç”±éœ€è¦æœå‹™å™¨ç«¯é…ç½®æ”¯æ´<br>
                                <strong>è§£æ±ºï¼š</strong>é…ç½® try_files è¦å‰‡ï¼Œå°‡æ‰€æœ‰è«‹æ±‚å›é€€åˆ° index.html
                            </p>
                        </div>

                        <div class="faq-item">
                            <h3 class="font-semibold text-red-600">å•é¡Œï¼šæ‰“åŒ…å¾Œéœæ…‹è³‡æºè¼‰å…¥å¤±æ•—</h3>
                            <p class="text-gray-600 dark:text-gray-300">
                                <strong>åŸå› ï¼š</strong>éƒ¨ç½²è·¯å¾‘èˆ‡é–‹ç™¼è·¯å¾‘ä¸ä¸€è‡´<br>
                                <strong>è§£æ±ºï¼š</strong>åœ¨ vite.config.ts ä¸­è¨­å®šæ­£ç¢ºçš„ base è·¯å¾‘
                            </p>
                        </div>

                        <div class="faq-item">
                            <h3 class="font-semibold text-red-600">å•é¡Œï¼šæ‰“åŒ…æª”æ¡ˆéå¤§</h3>
                            <p class="text-gray-600 dark:text-gray-300">
                                <strong>åŸå› ï¼š</strong>æœªé€²è¡Œç¨‹å¼ç¢¼åˆ†å‰²æˆ–åŒ…å«éå¤šä¾è³´<br>
                                <strong>è§£æ±ºï¼š</strong>é…ç½® manualChunksï¼Œä½¿ç”¨å‹•æ…‹ importï¼Œç§»é™¤æœªä½¿ç”¨çš„ä¾è³´
                            </p>
                        </div>
                    </div>
                </section>

                <!-- ç¸½çµ -->
                <section class="mb-12">
                    <div class="bg-green-50 dark:bg-green-900/20 p-6 rounded-lg">
                        <h2 class="text-xl font-bold mb-4 flex items-center">
                            <span class="mr-2">ğŸ‰</span>
                            ç« ç¯€ç¸½çµ
                        </h2>
                        <ul class="space-y-2">
                            <li>âœ… ç†è§£æ‰“åŒ…çš„å¿…è¦æ€§å’Œæ‰“åŒ…å‰å¾Œçš„å·¨å¤§å·®ç•°</li>
                            <li>âœ… æŒæ¡ Vite æ§‹å»ºé…ç½®çš„å„é …è¨­å®šå’Œå„ªåŒ–ç­–ç•¥</li>
                            <li>âœ… å­¸æœƒåˆ†ææ‰“åŒ…çµæœå’Œæ•ˆèƒ½å„ªåŒ–æ–¹æ³•</li>
                            <li>âœ… ç­è§£ä¸»æµéƒ¨ç½²æ–¹æ¡ˆå’Œé…ç½®è¦é»</li>
                            <li>âœ… å…·å‚™è§£æ±ºå¸¸è¦‹éƒ¨ç½²å•é¡Œçš„èƒ½åŠ›</li>
                        </ul>
                    </div>
                </section>
            </div>
        </div>
    </MainLayout>
</template>

<script setup lang="ts">
import MainLayout from '@/layouts/MainLayout.vue'
import CodeBlock from '@/components/shared/CodeBlock.vue'

// å°å…¥ç¨‹å¼ç¢¼ç¯„ä¾‹
import {
    developmentStructure,
    productionStructure,
    buildProcess,
    optimizationComparison
} from '@/examples/code-samples/config/build-comparison-example'

import {
    basicBuildConfig,
    advancedBuildConfig,
    envConfig,
    buildScripts
} from '@/examples/code-samples/config/vite-build-config-example'

import {
    nginxConfig,
    dockerConfig
} from '@/examples/code-samples/config/deploy-examples'
</script>

<style scoped>
.comparison-container {
    @apply border border-gray-200 dark:border-gray-700 rounded-lg p-6;
}

.steps-container {
    @apply space-y-6;
}

.step {
    @apply flex items-start space-x-4 p-4 bg-gray-50 dark:bg-gray-800 rounded-lg;
}

.step-number {
    @apply flex-shrink-0 w-8 h-8 bg-blue-500 text-white rounded-full flex items-center justify-center font-bold text-sm;
}

.step-content h3 {
    @apply mb-2;
}

.step-content p {
    @apply mb-2;
}

.deployment-card {
    @apply bg-white dark:bg-gray-800 p-6 rounded-lg border border-gray-200 dark:border-gray-700;
}

.faq-container {
    @apply space-y-4;
}

.faq-item {
    @apply p-4 bg-gray-50 dark:bg-gray-800 rounded-lg border-l-4 border-red-400;
}
</style>
