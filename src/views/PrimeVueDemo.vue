<template>
  <MainLayout>
    <div class="lesson-content">
      <h1 class="section-header">PrimeVue å…ƒä»¶åº«æ·±åº¦é«”é©—</h1>

      <div class="introduction-section">
        <h2>ğŸ¯ å­¸ç¿’ç›®æ¨™</h2>
        <div class="learning-objectives">
          <div class="objective-item">
            <span class="objective-icon">ğŸ¢</span>
            <span>é«”é©— PrimeVue çš„ä¼æ¥­ç´šè¨­è¨ˆé¢¨æ ¼</span>
          </div>
          <div class="objective-item">
            <span class="objective-icon">ğŸ“Š</span>
            <span>æŒæ¡å°ˆæ¥­ç´šæ•¸æ“šè¡¨æ ¼å’Œåœ–è¡¨</span>
          </div>
          <div class="objective-item">
            <span class="objective-icon">ğŸ¨</span>
            <span>å­¸ç¿’ä¸»é¡Œç³»çµ±å’Œå®¢è£½åŒ–</span>
          </div>
          <div class="objective-item">
            <span class="objective-icon">âš¡</span>
            <span>äº†è§£é«˜æ•ˆèƒ½å¤§æ•¸æ“šè™•ç†</span>
          </div>
        </div>
      </div>

      <!-- å®˜æ–¹æ–‡ä»¶åƒè€ƒ -->
      <div class="bg-purple-50 border border-purple-200 rounded-xl p-6 mb-8">
        <div class="flex items-center mb-4">
          <div class="w-8 h-8 bg-purple-500 rounded-full flex items-center justify-center mr-3">
            <svg class="w-4 h-4 text-white" fill="currentColor" viewBox="0 0 20 20">
              <path d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z" />
            </svg>
          </div>
          <h2 class="text-xl font-bold text-purple-800">ğŸ“š PrimeVue å®˜æ–¹æ–‡ä»¶åƒè€ƒ</h2>
        </div>

        <div class="bg-white rounded-lg p-4 border border-purple-100">
          <div class="flex items-start space-x-3">
            <div class="flex-shrink-0 w-6 h-6 bg-purple-100 rounded-full flex items-center justify-center mt-1">
              <svg class="w-4 h-4 text-purple-600" fill="currentColor" viewBox="0 0 20 20">
                <path
                  d="M11 3a1 1 0 100 2h2.586l-6.293 6.293a1 1 0 101.414 1.414L15 6.414V9a1 1 0 102 0V4a1 1 0 00-1-1h-5z" />
                <path d="M5 5a2 2 0 00-2 2v8a2 2 0 002 2h8a2 2 0 002-2v-3a1 1 0 10-2 0v3H5V7h3a1 1 0 000-2H5z" />
              </svg>
            </div>
            <div class="flex-1">
              <h3 class="font-semibold text-purple-900 mb-2">
                <a href="https://primevue.org/setup/" target="_blank" rel="noopener noreferrer"
                  class="hover:text-purple-700 hover:underline">
                  PrimeVue å®˜æ–¹æ–‡ä»¶
                </a>
              </h3>
              <p class="text-purple-700 text-sm mb-3">
                PrimeVue æ˜¯ä¸€å€‹åŠŸèƒ½è±å¯Œçš„ Vue.js UI å…ƒä»¶åº«ï¼Œæä¾›ä¼æ¥­ç´šçš„è¨­è¨ˆç³»çµ±å’Œå¼·å¤§çš„æ•¸æ“šè™•ç†çµ„ä»¶ã€‚
                å®˜æ–¹æ–‡ä»¶åŒ…å«å®Œæ•´çš„å®‰è£æŒ‡å—ã€çµ„ä»¶æ–‡æª”å’Œé€²éšåŠŸèƒ½èªªæ˜ã€‚
              </p>
              <div class="grid grid-cols-1 md:grid-cols-2 gap-3 text-sm">
                <div>
                  <h4 class="font-medium text-purple-800 mb-1">ğŸ”— é‡è¦ç« ç¯€</h4>
                  <ul class="text-purple-600 space-y-1">
                    <li>â€¢ Setup - å®‰è£èˆ‡åŸºç¤é…ç½®</li>
                    <li>â€¢ Components - å®Œæ•´çµ„ä»¶åƒè€ƒ</li>
                    <li>â€¢ Theming - ä¸»é¡Œç³»çµ±èªªæ˜</li>
                    <li>â€¢ Pass Through - æ¨£å¼å®¢è£½åŒ–</li>
                  </ul>
                </div>
                <div>
                  <h4 class="font-medium text-purple-800 mb-1">â­ ç‰¹è‰²åŠŸèƒ½</h4>
                  <ul class="text-purple-600 space-y-1">
                    <li>â€¢ Unstyled Mode - ç„¡æ¨£å¼æ¨¡å¼</li>
                    <li>â€¢ DataTable - å¼·å¤§çš„æ•¸æ“šè¡¨æ ¼</li>
                    <li>â€¢ Charts - è±å¯Œçš„åœ–è¡¨çµ„ä»¶</li>
                    <li>â€¢ Templates - å°ˆæ¥­æ¨¡æ¿ç³»çµ±</li>
                  </ul>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- åŸºç¤è¡¨å–®å…ƒä»¶ -->
      <div class="demo-section">
        <h2>ğŸ“ åŸºç¤è¡¨å–®å…ƒä»¶</h2>
        <p class="section-description">
          PrimeVue æä¾›äº†è±å¯Œçš„è¡¨å–®å…ƒä»¶ï¼Œç‰¹åˆ¥é©åˆä¼æ¥­ç´šæ‡‰ç”¨çš„è¤‡é›œè¡¨å–®éœ€æ±‚ã€‚
        </p>

        <div class="component-demo">
          <h3>ğŸ”¤ æ–‡å­—è¼¸å…¥æ¡† (InputText)</h3>
          <div class="demo-showcase">
            <div class="demo-preview">
              <div class="form-row">
                <label for="patient-name">ç—…æ‚£å§“å</label>
                <InputText id="patient-name" v-model="patientForm.name" placeholder="è«‹è¼¸å…¥ç—…æ‚£å§“å" class="w-full" />
              </div>
              <div class="form-row">
                <label for="medical-id">ç—…æ­·è™Ÿç¢¼</label>
                <InputText id="medical-id" v-model="patientForm.medicalId" placeholder="è«‹è¼¸å…¥ç—…æ­·è™Ÿç¢¼" class="w-full" />
              </div>
              <div class="form-row">
                <label for="diagnosis">é‘‘åˆ¥è¨ºæ–·</label>
                <Textarea id="diagnosis" v-model="patientForm.diagnosis" placeholder="è«‹è¼¸å…¥é‘‘åˆ¥è¨ºæ–·" :rows="3"
                  class="w-full" />
              </div>
            </div>
            <div class="demo-code">
              <CodeBlock :code="inputTextExampleCode" language="vue" filename="PatientForm.vue" :show-copy="true" />
            </div>
          </div>
        </div>

        <div class="component-demo">
          <h3>ğŸ“‹ ä¸‹æ‹‰é¸å–® (Dropdown)</h3>
          <div class="demo-showcase">
            <div class="demo-preview">
              <div class="form-row">
                <label for="department">ç§‘åˆ¥</label>
                <Dropdown id="department" v-model="patientForm.department" :options="departmentOptions"
                  option-label="label" option-value="value" placeholder="è«‹é¸æ“‡ç§‘åˆ¥" class="w-full" />
              </div>
              <div class="form-row">
                <label for="arrival-method">åˆ°é™¢æ–¹å¼</label>
                <Dropdown id="arrival-method" v-model="patientForm.arrivalMethod" :options="arrivalMethodOptions"
                  option-label="label" option-value="value" placeholder="è«‹é¸æ“‡åˆ°é™¢æ–¹å¼" class="w-full" />
              </div>
              <div class="form-row">
                <label for="gender">æ€§åˆ¥</label>
                <Dropdown id="gender" v-model="patientForm.gender" :options="genderOptions" option-label="label"
                  option-value="value" placeholder="è«‹é¸æ“‡æ€§åˆ¥" class="w-full" />
              </div>
            </div>
            <div class="demo-code">
              <CodeBlock :code="selectExampleCode" language="vue" filename="PatientForm.vue" :show-copy="true" />
            </div>
          </div>
        </div>

        <div class="component-demo">
          <h3>ğŸ“… æ—¥æœŸæ™‚é–“é¸æ“‡å™¨ (DatePicker)</h3>
          <div class="demo-showcase">
            <div class="demo-preview">
              <div class="form-row">
                <label for="arrival-date">åˆ°é”æ™‚é–“</label>
                <DatePicker id="arrival-date" v-model="patientForm.arrivalDate" showTime hourFormat="24"
                  placeholder="é¸æ“‡åˆ°é”æ™‚é–“" dateFormat="yy-mm-dd" class="w-full" />
              </div>
              <div class="form-row">
                <label for="lmp-date">LMP æ—¥æœŸ</label>
                <DatePicker id="lmp-date" v-model="patientForm.lmpDate" placeholder="é¸æ“‡ LMP æ—¥æœŸ" dateFormat="yy-mm-dd"
                  class="w-full" />
              </div>
              <div class="form-row">
                <label for="onset-time">ç™¼ç—…æ™‚é–“</label>
                <DatePicker id="onset-time" v-model="patientForm.onsetTime" timeOnly hourFormat="24"
                  placeholder="é¸æ“‡ç™¼ç—…æ™‚é–“" class="w-full" />
              </div>
            </div>
            <div class="demo-code">
              <CodeBlock :code="calendarExampleCode" language="vue" filename="PatientForm.vue" :show-copy="true" />
            </div>
          </div>
        </div>

        <div class="component-demo">
          <h3>ğŸ”¢ æ•¸å­—è¼¸å…¥æ¡† (InputNumber)</h3>
          <div class="demo-showcase">
            <div class="demo-preview">
              <div class="vital-signs">
                <div class="vital-item">
                  <label for="temperature">é«”æº« (Â°C)</label>
                  <InputNumber id="temperature" v-model="vitalSigns.temperature" :min="35" :max="42" :step="0.1"
                    :min-fraction-digits="1" :max-fraction-digits="1" show-buttons button-layout="horizontal"
                    class="w-full" />
                </div>
                <div class="vital-item">
                  <label for="systolic">æ”¶ç¸®å£“ (mmHg)</label>
                  <InputNumber id="systolic" v-model="vitalSigns.systolic" :min="60" :max="250" show-buttons
                    class="w-full" />
                </div>
                <div class="vital-item">
                  <label for="diastolic">èˆ’å¼µå£“ (mmHg)</label>
                  <InputNumber id="diastolic" v-model="vitalSigns.diastolic" :min="40" :max="150" show-buttons
                    class="w-full" />
                </div>
                <div class="vital-item">
                  <label for="heart-rate">å¿ƒè·³ (bpm)</label>
                  <InputNumber id="heart-rate" v-model="vitalSigns.heartRate" :min="40" :max="200" show-buttons
                    class="w-full" />
                </div>
              </div>
            </div>
            <div class="demo-code">
              <CodeBlock :code="inputNumberExampleCode" language="vue" filename="VitalSigns.vue" :show-copy="true" />
            </div>
          </div>
        </div>
      </div>

      <!-- é€²éšäº’å‹•å…ƒä»¶ -->
      <div class="demo-section">
        <h2>ğŸš€ é€²éšäº’å‹•å…ƒä»¶</h2>
        <p class="section-description">
          PrimeVue çš„å¼·é …åœ¨æ–¼æä¾›ä¼æ¥­ç´šçš„è¤‡é›œäº’å‹•å…ƒä»¶ã€‚
        </p>

        <div class="component-demo">
          <h3>ğŸ”˜ å–®é¸æŒ‰éˆ•çµ„ (RadioButton)</h3>
          <div class="demo-showcase">
            <div class="demo-preview">
              <div class="triage-section">
                <h4>æª¢å‚·åˆ†ç´š</h4>
                <div class="triage-radio-group">
                  <div v-for="level in triageLevels" :key="level.value" class="triage-option">
                    <RadioButton :inputId="`triage-${level.value}`" v-model="patientForm.triageLevel"
                      :value="level.value" />
                    <label :for="`triage-${level.value}`" :class="`triage-label triage-${level.value}`">
                      <Tag :severity="level.severity" :value="level.label" />
                    </label>
                  </div>
                </div>
              </div>
            </div>
            <div class="demo-code">
              <CodeBlock :code="radioButtonExampleCode" language="vue" filename="TriageLevel.vue" :show-copy="true" />
            </div>
          </div>
        </div>

        <div class="component-demo">
          <h3>ï¸ æ»‘æ¡¿ (Slider)</h3>
          <div class="demo-showcase">
            <div class="demo-preview">
              <div class="pain-assessment">
                <h4>ç–¼ç—›è©•ä¼°é‡è¡¨</h4>
                <div class="slider-container">
                  <span class="slider-label">ç„¡ç—›</span>
                  <Slider v-model="patientForm.painScore" :min="0" :max="10" :step="1" class="pain-slider" />
                  <span class="slider-label">åŠ‡ç—›</span>
                </div>
                <div class="pain-display">
                  <Tag :severity="getPainSeverity(patientForm.painScore)" size="large">
                    ç–¼ç—›æŒ‡æ•¸: {{ patientForm.painScore }} / 10
                  </Tag>
                </div>
              </div>
            </div>
            <div class="demo-code">
              <CodeBlock :code="sliderExampleCode" language="vue" filename="PainAssessment.vue" :show-copy="true" />
            </div>
          </div>
        </div>

        <div class="component-demo">
          <h3>ğŸ”„ åˆ‡æ›é–‹é—œ (ToggleButton)</h3>
          <div class="demo-showcase">
            <div class="demo-preview">
              <div class="toggle-controls">
                <div class="toggle-item">
                  <label for="acute-change">æ€¥æ€§æ”¹è®Š</label>
                  <ToggleButton id="acute-change" v-model="patientForm.acuteChange" on-label="æ˜¯" off-label="å¦"
                    on-icon="pi pi-check" off-icon="pi pi-times" class="toggle-danger" />
                </div>
                <div class="toggle-item">
                  <label for="isolation">éœ€è¦éš”é›¢</label>
                  <ToggleButton id="isolation" v-model="patientForm.isolation" on-label="æ˜¯" off-label="å¦"
                    on-icon="pi pi-shield" off-icon="pi pi-check" class="toggle-warning" />
                </div>
                <div class="toggle-item">
                  <label for="follow-up">éœ€è¦è¿½è¹¤</label>
                  <ToggleButton id="follow-up" v-model="patientForm.followUp" on-label="æ˜¯" off-label="å¦"
                    on-icon="pi pi-eye" off-icon="pi pi-eye-slash" />
                </div>
              </div>
            </div>
            <div class="demo-code">
              <CodeBlock :code="toggleButtonExampleCode" language="vue" filename="PatientStatus.vue"
                :show-copy="true" />
            </div>
          </div>
        </div>

        <div class="component-demo">
          <h3>ğŸ“Š è³‡æ–™è¡¨æ ¼ (DataTable)</h3>
          <div class="demo-showcase">
            <div class="demo-preview">
              <DataTable :value="symptomsData" striped-rows paginator :rows="5" :rows-per-page-options="[5, 10, 20]"
                table-style="min-width: 50rem" class="symptoms-table">
                <Column field="category" header="ç—‡ç‹€åˆ†é¡" style="width: 15%"></Column>
                <Column field="symptom" header="ä¸»è¦ç—‡ç‹€" style="width: 25%"></Column>
                <Column field="severity" header="åš´é‡ç¨‹åº¦" style="width: 15%">
                  <template #body="{ data }">
                    <Tag :severity="getSeverityType(data.severity)" :value="data.severity" />
                  </template>
                </Column>
                <Column field="triageLevel" header="æª¢å‚·ç´šåˆ¥" style="width: 15%">
                  <template #body="{ data }">
                    <Tag :severity="getTriageType(data.triageLevel)" :value="data.triageLevel" />
                  </template>
                </Column>
                <Column field="duration" header="æŒçºŒæ™‚é–“" style="width: 15%"></Column>
                <Column header="æ“ä½œ" style="width: 15%">
                  <template #body="{ data, index }">
                    <div class="table-actions">
                      <Button icon="pi pi-pencil" severity="info" size="small" @click="editSymptom(data, index)"
                        v-tooltip="'ç·¨è¼¯'" />
                      <Button icon="pi pi-trash" severity="danger" size="small" @click="deleteSymptom(index)"
                        v-tooltip="'åˆªé™¤'" />
                    </div>
                  </template>
                </Column>
              </DataTable>
            </div>
            <div class="demo-code">
              <CodeBlock :code="dataTableExampleCode" language="vue" filename="SymptomsTable.vue" :show-copy="true" />
            </div>
          </div>
        </div>

        <div class="component-demo">
          <h3>ğŸ“‘ æ¨™ç±¤é  (TabView)</h3>
          <div class="demo-showcase">
            <div class="demo-preview">
              <TabView class="patient-tabs">
                <TabPanel header="ç—…æ‚£è³‡æ–™">
                  <div class="tab-content">
                    <h4>åŸºæœ¬è³‡æ–™</h4>
                    <div class="patient-info">
                      <p><strong>å§“å:</strong> {{ patientForm.name || 'æ—ç¾è²' }}</p>
                      <p><strong>æ€§åˆ¥:</strong> {{ getGenderLabel(patientForm.gender) || 'å¥³' }}</p>
                      <p><strong>ç§‘åˆ¥:</strong> {{ getDepartmentLabel(patientForm.department) || 'æ€¥è¨ºç§‘' }}</p>
                      <p><strong>åˆ°é™¢æ–¹å¼:</strong> {{ getArrivalMethodLabel(patientForm.arrivalMethod) || 'æ­¥è¡Œ' }}</p>
                    </div>
                  </div>
                </TabPanel>

                <TabPanel header="å™¨å®˜ç³»çµ±">
                  <div class="tab-content">
                    <h4>å™¨å®˜ç³»çµ±æª¢æŸ¥</h4>
                    <div class="organ-systems">
                      <div class="system-item">
                        <span class="system-name">å¿ƒè¡€ç®¡ç³»çµ±:</span>
                        <Tag severity="success" value="æ­£å¸¸" />
                      </div>
                      <div class="system-item">
                        <span class="system-name">å‘¼å¸ç³»çµ±:</span>
                        <Tag severity="success" value="æ­£å¸¸" />
                      </div>
                      <div class="system-item">
                        <span class="system-name">ç¥ç¶“ç³»çµ±:</span>
                        <Tag severity="success" value="æ­£å¸¸" />
                      </div>
                    </div>
                  </div>
                </TabPanel>

                <TabPanel header="å®‰ç©©ç·©å’Œ">
                  <div class="tab-content">
                    <h4>å®‰ç©©ç·©å’Œç…§è­·</h4>
                    <div class="comfort-care">
                      <p><strong>ç–¼ç—›è©•ä¼°:</strong> {{ patientForm.painScore }}/10</p>
                      <p><strong>æ€¥æ€§æ”¹è®Š:</strong>
                        <Tag :severity="patientForm.acuteChange ? 'danger' : 'success'"
                          :value="patientForm.acuteChange ? 'æ˜¯' : 'å¦'" />
                      </p>
                      <p><strong>éœ€è¦éš”é›¢:</strong>
                        <Tag :severity="patientForm.isolation ? 'warning' : 'success'"
                          :value="patientForm.isolation ? 'æ˜¯' : 'å¦'" />
                      </p>
                    </div>
                  </div>
                </TabPanel>

                <TabPanel header="æª¢å‚·åˆ†ç´š">
                  <div class="tab-content">
                    <h4>æª¢å‚·åˆ†ç´šçµæœ</h4>
                    <div class="triage-result">
                      <p><strong>åˆ†ç´š:</strong>
                        <Tag :severity="getTriageType(getTriageLevelLabel(patientForm.triageLevel))"
                          :value="getTriageLevelLabel(patientForm.triageLevel)" />
                      </p>
                      <p><strong>è©•ä¼°æ™‚é–“:</strong> {{ formatDate(patientForm.arrivalDate) || '2024-12-20 08:30' }}</p>
                    </div>
                  </div>
                </TabPanel>
              </TabView>
            </div>
            <div class="demo-code">
              <CodeBlock :code="tabViewExampleCode" language="vue" filename="PatientTabs.vue" :show-copy="true" />
            </div>
          </div>
        </div>
      </div>

      <!-- æŒ‰éˆ•æ“ä½œå€ -->
      <div class="demo-section">
        <h2>ğŸ¯ æ“ä½œæŒ‰éˆ•</h2>
        <div class="component-demo">
          <h3>ğŸ”˜ æŒ‰éˆ•çµ„åˆ (Button)</h3>
          <div class="demo-showcase">
            <div class="demo-preview">
              <div class="button-groups">
                <div class="button-group">
                  <h4>ä¸»è¦æ“ä½œ</h4>
                  <Button label="å„²å­˜è³‡æ–™" icon="pi pi-check" severity="success" size="large" />
                  <Button label="æ–°å¢è³‡æ–™" icon="pi pi-plus" severity="info" size="large" />
                  <Button label="å–æ¶ˆ" icon="pi pi-times" severity="secondary" size="large" />
                </div>
                <div class="button-group">
                  <h4>å¿«é€Ÿæ“ä½œ</h4>
                  <Button label="ç·Šæ€¥å‘¼å«" icon="pi pi-exclamation-triangle" severity="warning" />
                  <Button label="åˆ—å°å ±å‘Š" icon="pi pi-print" severity="info" />
                  <Button label="æ¸…é™¤è³‡æ–™" icon="pi pi-trash" severity="danger" />
                </div>
                <div class="button-group">
                  <h4>æŒ‰éˆ•ç‹€æ…‹</h4>
                  <Button :label="isLoading ? 'å„²å­˜ä¸­...' : 'å„²å­˜'" icon="pi pi-save" :loading="isLoading" severity="success"
                    @click="handleSave" />
                  <Button label="æäº¤è¡¨å–®" icon="pi pi-send" :disabled="!isFormValid" severity="info" />
                </div>
              </div>
            </div>
            <div class="demo-code">
              <CodeBlock :code="buttonExampleCode" language="vue" filename="ActionButtons.vue" :show-copy="true" />
            </div>
          </div>
        </div>
      </div>

      <!-- å®Œæ•´è¡¨å–®ç¤ºä¾‹ -->
      <div class="demo-section">
        <h2>ğŸ¥ å®Œæ•´é†«ç™‚è¡¨å–®ç¤ºä¾‹</h2>
        <div class="complete-form">
          <Card class="patient-form-card">
            <template #title>
              <div class="card-title">
                <i class="pi pi-user-plus"></i>
                <span>ç—…æ‚£åŸºæœ¬è³‡æ–™</span>
              </div>
            </template>

            <template #content>
              <div class="form-grid">
                <div class="form-group">
                  <label for="form-name">å§“å</label>
                  <InputText id="form-name" v-model="patientForm.name" placeholder="è«‹è¼¸å…¥ç—…æ‚£å§“å" />
                </div>

                <div class="form-group">
                  <label for="form-gender">æ€§åˆ¥</label>
                  <Dropdown id="form-gender" v-model="patientForm.gender" :options="genderOptions" option-label="label"
                    option-value="value" placeholder="è«‹é¸æ“‡æ€§åˆ¥" />
                </div>

                <div class="form-group">
                  <label for="form-arrival">åˆ°é”æ™‚é–“</label>
                  <DatePicker id="form-arrival" v-model="patientForm.arrivalDate" showTime hourFormat="24"
                    placeholder="é¸æ“‡åˆ°é”æ™‚é–“" />
                </div>

                <div class="form-group">
                  <label for="form-department">ç§‘åˆ¥</label>
                  <Dropdown id="form-department" v-model="patientForm.department" :options="departmentOptions"
                    option-label="label" option-value="value" placeholder="è«‹é¸æ“‡ç§‘åˆ¥" />
                </div>

                <div class="form-group full-width">
                  <label>æª¢å‚·åˆ†ç´š</label>
                  <div class="triage-selection">
                    <div v-for="level in triageLevels" :key="level.value" class="triage-option">
                      <RadioButton :inputId="`form-triage-${level.value}`" v-model="patientForm.triageLevel"
                        :value="level.value" />
                      <label :for="`form-triage-${level.value}`">
                        <Tag :severity="level.severity" :value="level.label" />
                      </label>
                    </div>
                  </div>
                </div>

                <div class="form-group full-width">
                  <label>ç–¼ç—›è©•ä¼° ({{ patientForm.painScore }}/10)</label>
                  <Slider v-model="patientForm.painScore" :min="0" :max="10" :step="1" />
                </div>

                <div class="form-group">
                  <label for="form-acute">æ€¥æ€§æ”¹è®Š</label>
                  <ToggleButton id="form-acute" v-model="patientForm.acuteChange" on-label="æ˜¯" off-label="å¦" />
                </div>
              </div>

              <div class="form-actions">
                <Button label="å„²å­˜" icon="pi pi-check" severity="success" />
                <Button label="å–æ¶ˆ" icon="pi pi-times" severity="secondary" />
              </div>
            </template>
          </Card>
        </div>
      </div>
    </div>
  </MainLayout>
</template>

<script setup lang="ts">
import { ref } from 'vue'
import MainLayout from '@/layouts/MainLayout.vue'
import CodeBlock from '@/components/shared/CodeBlock.vue'

// PrimeVue å…ƒä»¶ (è‡ªå‹•å°å…¥ï¼Œç„¡éœ€æ‰‹å‹• import)
// import InputText from 'primevue/inputtext'
// import Dropdown from 'primevue/dropdown'
// ... ç­‰ç­‰

import {
  inputTextExampleCode,
  selectExampleCode,
  calendarExampleCode,
  inputNumberExampleCode,
  radioButtonExampleCode,
  sliderExampleCode,
  toggleButtonExampleCode,
  dataTableExampleCode,
  tabViewExampleCode,
  buttonExampleCode
} from '@/examples/code-samples/vue/primevue-examples'

// è¡¨å–®æ•¸æ“š
const patientForm = ref({
  name: '',
  medicalId: '',
  diagnosis: '',
  department: '',
  arrivalMethod: '',
  gender: '',
  arrivalDate: null,
  lmpDate: null,
  onsetTime: null,
  triageLevel: '3',
  painScore: 5,
  acuteChange: false,
  isolation: false,
  followUp: true
})

// ç”Ÿå‘½å¾µè±¡
const vitalSigns = ref({
  temperature: 36.7,
  systolic: 120,
  diastolic: 80,
  heartRate: 72
})

// ä¸‹æ‹‰é¸é …
const departmentOptions = ref([
  { label: 'æ€¥è¨ºç§‘', value: 'emergency' },
  { label: 'å…§ç§‘', value: 'internal' },
  { label: 'å¤–ç§‘', value: 'surgery' },
  { label: 'å°å…’ç§‘', value: 'pediatrics' },
  { label: 'å©¦ç”¢ç§‘', value: 'obstetrics' }
])

const arrivalMethodOptions = ref([
  { label: 'æ­¥è¡Œ', value: 'walk' },
  { label: 'è¼ªæ¤…', value: 'wheelchair' },
  { label: 'æ¨åºŠ', value: 'stretcher' },
  { label: 'æ•‘è­·è»Š', value: 'ambulance' }
])

const genderOptions = ref([
  { label: 'ç”·', value: 'male' },
  { label: 'å¥³', value: 'female' },
  { label: 'å…¶ä»–', value: 'other' }
])

// æª¢å‚·åˆ†ç´šé¸é …
const triageLevels = ref([
  { value: '1', label: 'ç¬¬1ç´š - å¾©ç”¦æ€¥æ•‘', severity: 'danger' },
  { value: '2', label: 'ç¬¬2ç´š - å±æ€¥', severity: 'danger' },
  { value: '3', label: 'ç¬¬3ç´š - ç·Šæ€¥', severity: 'warning' },
  { value: '4', label: 'ç¬¬4ç´š - æ¬¡ç·Šæ€¥', severity: 'success' },
  { value: '5', label: 'ç¬¬5ç´š - éç·Šæ€¥', severity: 'info' }
])

// ç—‡ç‹€æ•¸æ“š
const symptomsData = ref([
  {
    category: 'å‘¼å¸ç³»çµ±',
    symptom: 'èƒ¸ç—›',
    severity: 'ä¸­åº¦',
    triageLevel: 'ç¬¬3ç´š',
    duration: '2å°æ™‚'
  },
  {
    category: 'æ¶ˆåŒ–ç³»çµ±',
    symptom: 'è…¹ç—›',
    severity: 'è¼•åº¦',
    triageLevel: 'ç¬¬4ç´š',
    duration: '1å¤©'
  },
  {
    category: 'ç¥ç¶“ç³»çµ±',
    symptom: 'é ­ç—›',
    severity: 'é‡åº¦',
    triageLevel: 'ç¬¬2ç´š',
    duration: '30åˆ†é˜'
  },
  {
    category: 'å¿ƒè¡€ç®¡',
    symptom: 'å¿ƒæ‚¸',
    severity: 'ä¸­åº¦',
    triageLevel: 'ç¬¬3ç´š',
    duration: '1å°æ™‚'
  },
  {
    category: 'éª¨éª¼è‚Œè‚‰',
    symptom: 'è…°ç—›',
    severity: 'è¼•åº¦',
    triageLevel: 'ç¬¬5ç´š',
    duration: '3å¤©'
  }
])

// æŒ‰éˆ•ç‹€æ…‹
const isLoading = ref(false)
const isFormValid = ref(true)

// å·¥å…·å‡½æ•¸
const getPainSeverity = (score: number) => {
  if (score <= 3) return 'success'
  if (score <= 6) return 'warning'
  return 'danger'
}

const getSeverityType = (severity: string) => {
  switch (severity) {
    case 'è¼•åº¦': return 'success'
    case 'ä¸­åº¦': return 'warning'
    case 'é‡åº¦': return 'danger'
    default: return 'info'
  }
}

const getTriageType = (level: string) => {
  switch (level) {
    case 'ç¬¬1ç´š': return 'danger'
    case 'ç¬¬2ç´š': return 'danger'
    case 'ç¬¬3ç´š': return 'warning'
    case 'ç¬¬4ç´š': return 'success'
    case 'ç¬¬5ç´š': return 'info'
    default: return 'info'
  }
}

const getGenderLabel = (value: string) => {
  return genderOptions.value.find(option => option.value === value)?.label
}

const getDepartmentLabel = (value: string) => {
  return departmentOptions.value.find(option => option.value === value)?.label
}

const getArrivalMethodLabel = (value: string) => {
  return arrivalMethodOptions.value.find(option => option.value === value)?.label
}

const getTriageLevelLabel = (value: string) => {
  return triageLevels.value.find(level => level.value === value)?.label
}

const formatDate = (date: Date | null) => {
  if (!date) return ''
  return date.toLocaleString('zh-TW')
}

// äº‹ä»¶è™•ç†
const editSymptom = (data: any, index: number) => {
  console.log('ç·¨è¼¯ç—‡ç‹€:', data, index)
}

const deleteSymptom = (index: number) => {
  symptomsData.value.splice(index, 1)
}

const handleSave = () => {
  isLoading.value = true
  setTimeout(() => {
    isLoading.value = false
  }, 2000)
}
</script>

<style scoped>
.introduction-section {
  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
  color: white;
  border-radius: 12px;
  padding: 2rem;
  margin: 2rem 0;
}

.learning-objectives {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
  gap: 1rem;
  margin-top: 1rem;
}

.objective-item {
  display: flex;
  align-items: center;
  gap: 0.75rem;
  padding: 1rem;
  background: rgba(255, 255, 255, 0.1);
  border-radius: 8px;
  backdrop-filter: blur(10px);
}

.objective-icon {
  font-size: 1.5rem;
}

.demo-section {
  margin: 3rem 0;
}

.section-description {
  font-size: 1.1rem;
  color: var(--text-secondary);
  margin-bottom: 2rem;
  padding: 1rem;
  background: var(--bg-secondary);
  border-radius: 8px;
  border-left: 4px solid #667eea;
}

.component-demo {
  margin: 2rem 0;
  border: 1px solid var(--border-color);
  border-radius: 12px;
  overflow: hidden;
}

.component-demo h3 {
  background: var(--bg-secondary);
  padding: 1rem 1.5rem;
  margin: 0;
  color: #667eea;
  border-bottom: 1px solid var(--border-color);
}

.demo-showcase {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 0;
}

.demo-preview {
  padding: 2rem;
  background: white;
  border-right: 1px solid var(--border-color);
}

.demo-code {
  background: var(--bg-tertiary);
  padding: 1rem;
}

.form-row {
  margin-bottom: 1.5rem;
}

.form-row label {
  display: block;
  margin-bottom: 0.5rem;
  font-weight: 600;
  color: var(--text-primary);
}

.vital-signs {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
  gap: 1rem;
}

.vital-item {
  text-align: center;
}

.vital-item label {
  display: block;
  margin-bottom: 0.5rem;
  font-weight: 600;
  color: var(--text-primary);
}

.triage-section h4 {
  margin-bottom: 1rem;
  color: var(--text-primary);
}

.triage-radio-group {
  display: flex;
  flex-direction: column;
  gap: 0.75rem;
}

.triage-option {
  display: flex;
  align-items: center;
  gap: 0.75rem;
}

.triage-label {
  cursor: pointer;
}

.pain-assessment h4 {
  margin-bottom: 1rem;
  color: var(--text-primary);
}

.slider-container {
  display: flex;
  align-items: center;
  gap: 1rem;
  margin: 1rem 0;
}

.slider-label {
  font-size: 0.9rem;
  color: var(--text-secondary);
  min-width: 40px;
}

.pain-slider {
  flex: 1;
}

.pain-display {
  text-align: center;
  margin-top: 1rem;
}

.toggle-controls {
  display: flex;
  flex-direction: column;
  gap: 1rem;
}

.toggle-item {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 0.75rem;
  background: var(--bg-secondary);
  border-radius: 6px;
}

.toggle-item label {
  font-weight: 600;
  color: var(--text-primary);
}

.symptoms-table {
  width: 100%;
}

.table-actions {
  display: flex;
  gap: 0.5rem;
}

.patient-tabs {
  margin-top: 1rem;
}

.tab-content {
  padding: 1rem;
}

.tab-content h4 {
  color: #667eea;
  margin-bottom: 1rem;
}

.patient-info p,
.comfort-care p,
.triage-result p {
  margin-bottom: 0.75rem;
  display: flex;
  align-items: center;
  gap: 0.5rem;
}

.organ-systems {
  display: flex;
  flex-direction: column;
  gap: 0.75rem;
}

.system-item {
  display: flex;
  align-items: center;
  gap: 0.75rem;
}

.system-name {
  font-weight: 600;
  min-width: 120px;
}

.button-groups {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
  gap: 2rem;
}

.button-group h4 {
  margin-bottom: 1rem;
  color: var(--text-primary);
}

.button-group .p-button {
  margin: 0.25rem;
}

.complete-form {
  margin-top: 2rem;
}

.patient-form-card {
  max-width: 800px;
  margin: 0 auto;
}

.card-title {
  display: flex;
  align-items: center;
  gap: 0.75rem;
  color: #667eea;
}

.form-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
  gap: 1.5rem;
  margin-bottom: 2rem;
}

.form-group {
  display: flex;
  flex-direction: column;
  gap: 0.5rem;
}

.form-group.full-width {
  grid-column: 1 / -1;
}

.form-group label {
  font-weight: 600;
  color: var(--text-primary);
}

.triage-selection {
  display: flex;
  flex-wrap: wrap;
  gap: 1rem;
}

.triage-selection .triage-option {
  display: flex;
  align-items: center;
  gap: 0.5rem;
}

.form-actions {
  display: flex;
  gap: 1rem;
  justify-content: center;
  padding-top: 1rem;
  border-top: 1px solid var(--border-color);
}

@media (max-width: 768px) {
  .demo-showcase {
    grid-template-columns: 1fr;
  }

  .demo-preview {
    border-right: none;
    border-bottom: 1px solid var(--border-color);
  }

  .vital-signs {
    grid-template-columns: repeat(2, 1fr);
  }

  .button-groups {
    grid-template-columns: 1fr;
  }

  .form-grid {
    grid-template-columns: 1fr;
  }

  .triage-selection {
    flex-direction: column;
    align-items: flex-start;
  }
}
</style>
